# eventbus_domain
.eventbus_domain
[plantuml,file="eventbus_domain.png"]

--
@startuml

skinparam nodesep 20

together {
    (Domain\nService) as DS
    (Domain\nObject) as DO
    (<i>Domain\n<i>Event) as DE
}
(<i>Member</i>) as MB
together {
    (Property) as P
    (Action) as A
    (Collection) as C
}
P -u-> MB : is a
A -u-> MB : is a
C -u-> MB : is a

DO -d-> MB : has
DS -d--> A : has

DE -d-> MB : can be \n declared \n for

(Execution) as EX
P "edit \n is an"-->  EX
A "invocation \n is an"--> EX

(Event\nBus) as EB
(Spring) as SPRING
SPRING .l.> EB : provides/\nmanages
EX -> EB : is published as: \n * before event (phase: EXECUTING)\n * after event (phase: EXECUTED)

(Event\nListener) as EL
EL --> EB : listens \n on
EL -u-> MB : can check/modify: \nvisibility (hide), \nusability (disable), \nvalidity (validate)

note right of DE
Phases are:
* HIDING
* DISABLING
* VALIDATING
* EXECUTING
* EXECUTED
The framework automatically sends out
events with the phases in the order listed.
end note

note right of MB
<i>DomainEvent</i> is declared as an
annotation type element in a member annotation, e.g.
<b>@Action(
        <b>domainEvent=<i>Custom</i>ActionDomainEvent.class).
end note

note right of EL
EventListeners can be declared on
any public Spring bean method, e.g.
<b>@EventListener(
       <b><i>Custom</i>ActionDomainEvent.class).
Via <i>DomainEvent</i>.getEventPhase(),
further filtering can be applied.
end note
@enduml
--
